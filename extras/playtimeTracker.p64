picotron cartridge // www.picotron.net
version 2

:: gfx/
:: map/
:: sfx/
:: main.lua
--[[pod_format="raw",created="2025-10-04 15:00:00",modified="2025-10-04 17:33:07",revision=96]]
window{
	x=0,y=0,
	width=0,height=0,has_frame=false,
	background_updates=true
}

notify("Playtime Tracker is running in the background.")

mkdir("/appdata/playtimeCounter/")
timePlayed=fetch("/appdata/playtimeCounter/played.pod") or {}

lastSave=time()
last=time()
function _update()
	--no idea how to limit fps, would limit if could
	local now=time()
	local processes=fetch("/ram/system/processes.pod")
	for i=1, #processes do
		local temp=split(processes[i].prog,"/")
		local filename=temp[#temp]
		if (not timePlayed[filename]) then
			timePlayed[filename]=0
		end
		timePlayed[filename]+=now-last
	end
	last=now
	if (now-lastSave>5) then
		--update playtime each 5s
		store("/appdata/playtimeCounter/played.pod",timePlayed)
		lastSave=now
	end
end
:: .info.pod
--[[pod,author="Astralsparv",created="2025-07-19 13:32:35",icon=userdata("u8",16,16,"00000000000505050505050000000000000000050507072020070705050000000000050707070720200707070705000000050707070707202007070707070500000507070707072020070707070705000507070707070720200707070707070505070707070707202007070707070705050707070707072020202020202020050507070707070720202020202020200505070707070707070707070707070705050707070707070707070707070707050005070707070707070707070707050000050707070707070707070707070500000005070707070707070707070500000000000505070707070707050500000000000000000505050505050000000000"),modified="2025-12-15 18:08:32",notes="Part of the Galaktisk Dashboard",runtime=20,title="Playtime Tracker",version="1.0",workspaces={{location="main.lua#7",workspace_index=1}}]]
:: gfx/.info.pod
--[[pod,created="2025-07-19 13:32:35",modified="2025-12-15 18:08:32"]]
:: gfx/0.gfx
b64$LS1bW3BvZCxjcmVhdGVkPSIyMDI1LTAxLTE3IDEwOjM1OjQ4Iixtb2RpZmllZD0iMjAyNS0w
MS0xNyAxMDozNzo0NCIscmV2aXNpb249Ml1dbHo0AH4AAAASMQAA8yF7WzBdPXtibXA9cHh1AEMg
EBAE8FYHEAfAF9AXwAcQB-BWLGZsYWdzPTAscGFuX3gIAMt5PTAsem9vbT04fSw_AB-wMQD-----
-----------------------------------------------------------XUG09OH19
:: map/.info.pod
--[[pod,created="2025-07-19 13:32:35",modified="2025-12-15 18:08:32"]]
:: map/0.map
b64$LS1bW3BvZCxjcmVhdGVkPSIyMDI1LTAxLTE3IDEwOjM1OjQ4Iixtb2RpZmllZD0iMjAyNS0w
MS0xNyAxMDozNzo0NCIscmV2aXNpb249MV1dbHo0AFQAAABEEAAA8Ah7e2JtcD11c2VyZGF0YSgi
aTE2IiwzMgMALyIwAQD--------------------7oSIpLHBhbl94PTAIANJ5PTAsdGlsZV9oPTE2
CgBgdz0xNn19
:: sfx/.info.pod
--[[pod,created="2025-07-19 13:32:35",modified="2025-12-15 18:08:32"]]
:: sfx/0.sfx
b64$LS1bW3BvZCxjcmVhdGVkPSIyMDI1LTAxLTE3IDEwOjM1OjQ5Iixtb2RpZmllZD0iMjAyNS0w
MS0xNyAxMDozNzo0NCIscmV2aXNpb249Ml1dbHo0AKAAAAALCgAA-zBweHUAAygAAAQABA9AEAIO
AAGgASACoA4ADxAADfDKAQIDQA8PkAQFBgdADJAICQoLQAyQDwwPDQ8ODEAM8P8BAOv-J6oBEAYP
IBABIAEgAfAAAhACDhABIA8hIAEwD0Dwww8oD--wxg-4Cg--D4AP9w8NAfAJARAGDjAA------_9
H-8BAKzPyA9AAA8QQP--sPD-AQD-6lD-----KQ==
:: [eoc]
